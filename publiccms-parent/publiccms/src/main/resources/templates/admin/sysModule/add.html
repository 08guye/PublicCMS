<@_sysModule id=id>
    <#assign a=object/>
    <#if (object.parentId)??><#assign parentId=(object.parentId)/></#if>
</@_sysModule>
<@_sysModule id=parentId!><#assign module=object/></@_sysModule>
<#if !deep?has_content><#assign deep=0/><#else><#assign deep=deep?number/></#if>
<form method="post" action="sysModule/save.do?callbackType=closeCurrent&navTabId=sysModule/list" class="pageForm required-validate" onsubmit="return validateCallback(this, navTabAjaxDone);">
    <input name="oldId" type="hidden" value="${id!}" />
    <input type="hidden" name="_csrf" value="<@_csrfToken admin=true/>"/>
    <div class="formBar">
        <ul>
            <li><button type="submit" class="buttonActive"><@t.page 'button.save'/></button></li>
            <li><button type="button" class="button close"><@t.page 'button.close'/></button></li>
        </ul>
    </div>
    <div class="pageFormContent" layoutH="60">
        <dl>
            <dt>ID:</dt>
            <dd>
                <input class="required" remote="sysModule/virify.do?oldId=${id!}" data-msg-remote="ID已存在" name="id" type="text" size="20" maxlength="30" value="${id!(parentId?has_content)?then(parentId+'_','')}" />
                <label><input name="menu" type="checkbox"<#if (!a?has_content||a.menu)&&deep lte 2> checked="checked"</#if>/>菜单</label>
            </dd>
        </dl>
        <dl>
            <dt><@t.page 'module.parent'/>:</dt>
            <dd>
                <input name="parentId" type="hidden" value="${parentId!}" />
                <input name="parentName" readonly="readonly" type="text" size="20" value="<@t.menu (module.id)!/>"/>
                <a class="btnLook" href="sysModule/lookup.html" lookupGroup="">选择</a>
            </dd>
        </dl>
      <fieldset>
      	<legend><@t.page 'common.name'/>:</legend>
      	<#list langs as k,v>
	        <dl class="nowrap">
	            <dt>${v}:</dt>
	            <dd>
	            	<input type="hidden" name="langList[${k?index}].id.lang" value="${k}"/>
	            	<input class="required" name="langList[${k?index}].value" type="text" size="20" maxlength="100" value="<@_sysModuleLang moduleId=id lang=k>${object.value!}</@_sysModuleLang>"/>
	            </dd>
	        </dl>
        </#list>
      </fieldset>
    <#if deep lte 2>
        <dl class="nowrap">
            <dt>附加图标:</dt>
            <dd>
                <input name="attached" type="text" size="50" maxlength="300" value="${(a.attached)!}"/>
                <a class="btnLook" href="sysModule/icons.html?field=attached" lookupGroup="">选择图标</a>
            </dd>
        </dl>
    </#if>
        <dl class="nowrap">
            <dt>页面地址:</dt>
            <dd>
                <input name="url" type="text" size="30" value="${(a.url)!}"/>
                <span class="info">此模块的展示页面，不带后缀。当用户所属角色显示所有模块时，将拥有这个地址权限</span>
            </dd>
        </dl>
        <dl class="nowrap">
            <dt>授权访问地址:</dt>
            <dd>
                <textarea name="authorizedUrl" cols="80" rows="8">${(a.authorizedUrl)!}</textarea>
                <span class="info">此模块需要授权的URL请求路径，不带后缀，使用逗号分隔。仅拥有所有权限或被授权管理该模块的角色拥有这些地址权限</span>
            </dd>
        </dl>
        <dl>
            <dt><@t.page 'common.sort'/>:</dt>
            <dd><input class="required digits" name="sort" type="number" size="3" value="${(a.sort)!0}"/></dd>
        </dl>
    </div>
</form>